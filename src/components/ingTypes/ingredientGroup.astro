---
import { db } from '../../lib/db';

const { ingType_ID, title } = Astro.props;

const ingredients = await db
  .selectFrom('ingredients')
  .selectAll()
  .where('ingType_ID', '=', ingType_ID)
  .execute();
---

<div class="bg-gradient-to-br from-white to-gray-50 rounded-2xl shadow-md p-5 border border-gray-200">
  <h2 class="text-lg sm:text-xl font-bold mb-4 text-purple-700 text-center">
    Ingredientes: <span class="capitalize">{title}</span>
  </h2>

  <p class="text-xs text-gray-500 text-center mb-3">
    Desmarca los que no puedes conseguir
  </p>

  <div class="max-h-56 overflow-y-auto pr-1">
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
      {ingredients.map(ing => (
        <label key={ing.ingredient_ID} class="flex items-center gap-2 text-sm text-gray-700 hover:bg-gray-100 px-2 py-1 rounded transition">
          <input 
            type="checkbox" 
            name="ingredients" 
            value={ing.ingredient_ID} 
            data-category={ingType_ID}
            class="accent-green-600 h-4 w-4 rounded focus:ring-2 focus:ring-green-400" 
            checked 
          />
          <span class="truncate">{ing.nombre_Ingrediente}</span>
        </label>
      ))}
    </div>
  </div>
</div>